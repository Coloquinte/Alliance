.\"   $Id: bbr.1,v 1.1 1999/05/31 17:30:13 alliance Exp $
.\" @(#)Labo.l 0.0 90/22/08 UPMC; Author: Frederic Petrot
.\" make a choice for Bold font thru the entire doc
.ie t \{\
.fp 4 C \}
.el \{\
.fp 4 B \}
.TH BBR 1 "October 1, 1997" "ASIM/LIP6" "ALLIANCE USER COMMANDS"
.SH NAME
bbr \- A pitchless channel router for preplaced two blocks floorplan
.SH SYNOPSIS
.TP
\f4bbr\fR \fIplanet\fR [ \f4-v\fR ] [ \f4-o \fIfilename\fR ] [ \fIsupply width\fR ]
.so man1/alc_origin.1
.SH DESCRIPTION
The goal of \f4bbr\fR is to interconnect two, and only two, macro-blocks
through a routing channel.
.TP 20
Input files
Its first argument, \fIplanet\fR, is the name of two views of a figure.
.br
The layout one, with the constraint that only two instances must be placed,
and that they must abut in such a way that \f4bbr\fR can deduce the channel.
And the structural one, that describes the interconnections to be made.
Consistency checks are done to ensure routability of the nets.
.PP
The nets are of two types for \f4bbr\fR, the \fIsimple nets\fR, that are
routed in minimum width with the symbolic channel router, see \f4scr\fR(1), and
the \fIspecial nets\fR, like \fIpower\fR, \fIground\fR and \fIclock\fR, that
are handled specifically by bbr.
.TP 20
Simple nets
\f4bbr\fR looks for the validity of a net, checking that either all the
connectors linked to the net are accessible in the channel, or that there is
a single connector not to be routed in the channel.
.TP
Special nets
When a supplies is demanded, either one or two wires are drawn parallel to the
channel, depending on the location of the connectors on the blocks.
Supplies are \fInot\fR connected together by the router.
\f4bbr\fR will not be confused with \fIspecial nets\fR having the same name
but not beeing connected together.
This will lead to an explicit unexpected renaming of some physical external
connectors.
.LP
Physical connectors can be present in the placement file, in order to specify
some constraints to the router.
Two positions are legal :
.TP 20
Right on the channel coordinate
If a connector is placed where the two block abut, then it will be used as
routing point on the given side of the channel.
It is legal to put several connectors at the same coordinate, since the channel
width is zero when starting.
The router will choose a track for each of them, so there is no warranty on the
relative order of connectors on the orthogonal faces of the channel.
.TP 20
On the parallel external sides of the block
If a feed through is detected in the instance under the connector, the
router will use the track to reach the channel.
.LP
The external connectors appearing in the netlist file but not in the placement
file are physically created on a randomly choosen face of the channel. 
.LP
The physical connectors to appear in the interface of the block are the one
declared in the netlist.
Other instance connectors will not be copied up.
.SH CONSTRAINTS
As \f4bbr\fR is only a channer router, not a floorplan one, the design must
ensure routability.
.PP
Both the instances must have single \fIpower\fP and \fIground\fP signals.
These signals should be available in the channel, as \fBbbr\fR must
tie them to realize the input netlist.
.PP
All instance connectors not in the channel should appear as connectors of the
top level figure.
Otherwise \fBbbr\fR will complain that it can't route them together.
.SH OPTIONS
.TP 20
\f4-v\fR
produces a verbose output, giving the time needed for each step of the routing
process.
Some statistics on the number of vias and the wire length are also displayed.
.TP
\f4-o \fIfilename\fR
renames the output file name to \fIfilename\fR.
By default, the name of the input placement file is used, suffixed by \f4_f\fR.
.TP
\fIsupply width\fR
indicates the signals to be considered as supplies.
These signals are not going to be routed by the channel router, but will
be drawn straigth through the channel, with wires of \fIwidth\fR lambda wide.
Any number of power supplies and crucial clock may be specified that way.
.SH EXAMPLES
.RS
\f4bbr bank+rom -v vddb 12 vddr 12 vssb 10 vddr 12\fR
.RE
will create a \f4bank+rom_f.cp\fR file in the current directory, displaying the
routing phases, and adding four supplies, two on the bank side, two on the rom
side.
.SH OUTPUT FILE
.TP 20
\fIname.xx\fP
Where name is \fIplanet\fP or \f4filename\fP if \f4-o\fP is specified, and
\fIxx\fP the file format chosen with the \f4MBK_OUT_PH\fP(1) environment
variable.
.SH ENVIRONMENT VARIABLES
\f4bbr\fR relies on the proper setting of the following enviroment variables :
.TP 20
\f4MBK_CATA_LIB\fR(1)
gives the path to the cell libraries.
Since \f4bbr\fR doesn't dive deep into the blocks, only the instances'
models must be on the search path.
.TP
\f4MBK_WORK_LIB\fR(1)
furnishes the path to the working directory.
.TP
\f4MBK_IN_PH\fR(1)
indicates the input layout file format.
.TP
\f4MBK_OUT_PH\fR(1)
indicates the output layout file format.
.TP
\f4MBK_IN_LO\fR(1)
indicates the input structural file format.
.SH SEE ALSO
.BR mbk(1),
.BR scr(1),
.BR MBK_CATA_LIB(1),
.BR MBK_WORK_LIB(1),
.BR MBK_IN_PH(1),
.BR MBK_OUT_PH(1),
.BR MBK_IN_LO(1).

.SH DIAGNOSTICS
\f4no physical instance\fR
.br
\f4only one physical instance placed\fR
.br
\f4more than two physical instance placed\fR
.RS
There must be two and only two instances in the logical and placement file
in order for \f4bbr\fR to work.
.RE
 
\f4unexpected logical instance 'name'\fR
\f4instance 'x' has physical model 'y' and logical model 'z'\fR
.RS
The name of the logical and physical instances does not match, so the two views
are inconsistent.
.RE
 
\f4the channel cannot be found from the placement\fR
.RS
The instance placement is not so that \f4bbr\fP can deduce the channel
direction and coordinates.
It's probably either a misuse of \f4bbr\fR or a designer error.
.RE
 
\f4cannot route connectors 'a' and 'b' together\fR
.RS
The two connectors are logically connected, but do not belong to the
channel, so it's not possible to connect them.
\f4bbr\fP is \fInot\fP a floorplan router.
These connector placement issues must be known before using \f4bbr\fR.
.RE
 
\f4unable to change layer on edges of channel for connector '%s'\fR
.RS
A hand placed connector is wanted with a given layer in contradiction with
the prefered routing layer.
.RE
 
\f4connector '%s' changed to minimum width\fR
.RS
A hand placed connector is wanted with a given with, but \f4bbr\fR can
handle only minimun width wires, but for supplies.
.RE
 
\f4connector '%s' different from channel y, %d != %d, thus ignored\fR
.br
\f4connector '%s' different from channel x, %d != %d, thus ignored\fR
.RS
A hand placed connector is not on the initial channel coordinate.
.RE
 
\f4connector '%s' is not on EAST or WEST face of the figure, thus ignored\fR
.br
\f4connector '%s' is not on SOUTH or NORTH face of the figure, thus ignored\fR
.RS
A hand placed connector is not on an expected face for the router.
.RE
 
\f4no logical external connector equivalent to phisical '%s'\fR
.RS
A hand placed physical connector has no logical equivalent, thus leading
to an inconsistence between the two views.
.RE
 
\f4connector '%s' on a feed through of a different layer\fR
.RS
A hand placed physical connector has a layer conflicting with the feed
through it's placed on.
.RE
 
\f4not enough empty tracks for correct supplies connections\fR
.RS
In certain cases where the channel is dense and many supplies are wanted,
the router may no be able to connected all the supplies together, because
of a lack of track.
There ain't nothing much to do.
.RE

.so man1/alc_bug_report.1

